/**
 * daterange-picker-ex
 * @version v1.1.7
 * @link https://allanjamesvestal.github.io/DateRange-Picker-Ex/
 * @license MIT
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(e,a){"use strict";var t=window.$||window.jquery||e;t.DRPExLang=t.extend({"default":"en",en:{selected:"Selected:",day:"Day",days:"Days","apply-disabled":"Close","apply-enabled":"Apply","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W",shortcuts:"Shortcuts",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","batch-week":"week","batch-weekdays":"weekdays","batch-weekends":"weekends","batch-month":"month","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","range-start-bound":"Start date range out-of-bound","range-end-bound":"End date range out-of-bound","batch-invalid":"Date range does not satisfy batch constraint (%s)","disabled-range":"Date range spans across disabled dates","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between {minDays} and {maxDays} days","default-default":"Please select a date range"}},t.DRPExLang),t.fn.dateRangePicker=function(e){function n(){var a=s(te.locale),n=a[0];te.fblocalizer=a[1];var r=te.locale;if(e.language)e.language in t.DRPExLang&&(r=e.language);else{var i=navigator.languages||navigator.userLanguage||(navigator.language?[navigator.language]:[navigator.browserLanguage]);for(var l in i){var d=i[l].toLowerCase();if(d in t.DRPExLang){r=d;break}}}a=s(r),te.locale=a[0],te.localizer=a[1];var p=te.momentObj().locale();e.language&&te.momentObj().locale(e.language).locale()===e.language||te.momentObj().locale(te.locale).locale()!==te.locale&&te.momentObj().locale(r).locale()!==r&&te.momentObj().locale(n).locale()!==n&&te.momentObj().locale(p),te.monthFormat=te.momentObj().localeData().longDateFormat("LL").replace(/Y(\s*)[^YMD]*D[^M]*/,"Y$1").replace(/M(\s*)[^YMD]*D[^Y]*/,"M$1").replace(/[^YM]*D[^YM]*/,""),void 0===e.startOfWeek&&(e.startOfWeek=7===te.momentObj().startOf("week").isoWeekday()?0:1),te.wrapper=_(t(".dr-picker").length),(e.container||t("body")).append(te.wrapper);var m;m=e.singleDate?o("default-single"):e.minDays&&e.maxDays?o("default-range").replace(/\{minDays\}/,e.minDays).replace(/\{maxDays\}/,e.maxDays):e.minDays?o("default-more").replace(/\%d/,e.minDays):e.maxDays?o("default-less").replace(/\%d/,e.maxDays):o("default-default"),te.wrapper.find(".default-top").html(m).attr("title",m),e.singleMonth?te.wrapper.addClass("single-month"):te.wrapper.addClass("two-months"),te.wrapper.attr("unselectable","on").css("user-select","none").bind("selectstart",function(e){return e.preventDefault(),!1}),te.wrapper.find(".next").click(function(){e.stickyMonths?f(t(this)):c(t(this))}),te.wrapper.find(".prev").click(function(){e.stickyMonths?u(t(this)):h(t(this))}),te.wrapper.delegate(".day","click",function(e){W(t(this))}),te.wrapper.delegate(".day","mouseenter",function(e){C(t(this))}),te.wrapper.delegate(".week-number","click",function(e){M(t(this))}),te.wrapper.delegate(".week-number","mouseenter",function(e){P(t(this))}),te.wrapper.delegate(".month-wrapper table tbody","mouseleave",function(){te.wrapper.find(".range-tip").hide(),x()}),te.wrapper.find(".apply-btn").click(function(){A()}),te.wrapper.find("[shortcut]").click(function(){g.call(this)})}function r(e){if(!te.wrapper){if(void 0!==te.wrapper)throw new Error("Already destroyed");if(e)throw new Error("Not yet initialized")}}function s(e){for(var a=t.DRPExLang[e];a.constructor===String;)e=a,a=t.DRPExLang[a];return[e,a]}function o(e){return te.localizer[e]||te.fblocalizer[e]||"??"}function i(e){return e.start&&e.end?a(e.start).isAfter(a(e.end)):null}function l(e){if(i(e)){var a=e.end;return e.end=e.start,e.start=a,!0}return!1}function d(e,a){return a.contains(e.target)||e.target==a}function p(a){d(a,te.anchor[0])||d(a,te.wrapper[0])||w(e.animationTime)}function c(a){var t=a.parents("table").hasClass("month2"),n=J(t?te.month2:te.month1);!e.singleMonth&&!t&&U(n,te.month2)>=0||G(n)||(F(n,t?"month2":"month1"),V())}function f(){var e=J(te.month1),a=J(te.month2);G(a)||(F(e,"month1"),F(a,"month2"))}function h(e){var t=e.parents("table").hasClass("month2"),n=K(t?te.month2:te.month1);t&&U(n,te.month1)<=0||G(a(n).endOf("month").startOf("day").toDate())||(F(n,t?"month2":"month1"),V())}function u(){var e=K(te.month1),t=K(te.month2);G(a(e).endOf("month").startOf("day").toDate())||(F(t,"month2"),F(e,"month1"))}function g(){var n,r,s,o=t(this).attr("shortcut"),i=a().startOf("day");if(o.indexOf("day")!=-1){var l=parseInt(o.split(",",2)[1]);0==l?(O(),$()):(n=i.clone().add(l>0?1:-1,"day").toDate(),r=i.add(l,"day").toDate())}else if(o.indexOf("week")!=-1){var s=o.indexOf("prev,")==-1;n=s?i.day(e.startOfWeek?8:7).toDate():i.day(e.startOfWeek?-6:-7).toDate(),r=i.clone().day(e.startOfWeek?7:6).toDate()}else if(o.indexOf("month")!=-1){var s=o.indexOf("prev,")==-1;n=s?i.add(1,"month").date(1).toDate():i.subtract(1,"month").date(1).toDate(),r=i.clone().endOf("month").startOf("day").toDate()}else if(o.indexOf("year")!=-1){var s=o.indexOf("prev,")==-1;n=s?i.add(1,"year").month(0).date(1).toDate():n=i.subtract(1,"year").month(0).date(1).toDate(),r=i.clone().endOf("year").startOf("day").toDate()}else if("custom"==o){var d=t(this).text(),p=e.shortcuts.custom[d],c="function"==typeof p?p(i):p;if(c&&2==c.length)n=c[0],r=c[1];else{var f=c[0];F(f,"month1"),V()}}n&&r&&(Y(n,r),$())}function m(){var e=te.anchor.offset(),a=te.anchor.outerWidth(),n=te.anchor.outerHeight();e.right=e.left+a,e.bottom=e.top+n;var r=te.wrapper.offset(),s=te.wrapper.outerWidth(),o=te.wrapper.outerHeight();r.right=r.left+s,r.bottom=r.top+o;var i={top:t(window).scrollTop(),left:t(window).scrollLeft()},l=t(window).width(),d=t(window).height();if(i.right=i.left+l,i.bottom=i.top+d,r.left>=i.left&&r.right<=i.right&&r.top>=i.top&&r.bottom<=i.bottom&&r.left==e.left&&(r.top==e.bottom||r.bottom==e.top))return!1;var p,c=e.left+s<=i.right?Math.max(e.left,i.left):Math.max(i.left,i.right-s),f=e.bottom+o<=i.bottom||e.top-o<i.top;if(f){var h=Math.max(e.bottom,i.top);te.wrapper.css({top:h,bottom:"auto",left:c}),p=h-e.bottom}else{var u=t("body").outerHeight(),g=Math.min(e.top,i.bottom);te.wrapper.css({top:"auto",bottom:u-g,left:c}),p=e.top-g}return te.wrapper.css({opacity:.3+.7/Math.log2(2+(p>>7))}),!0}function v(a){if(!te.active){te.wrapper||n(),te.active=!0,te.wrapper.css({display:"block",visibility:0}),D(),k(),e.container||(m(),t(window).bind("resize.DRPEx scroll.DRPEx",m)),te.wrapper.css({display:"none",visibility:"initial"});var r=function(){te.anchor.trigger("DRPEx-opened",{anchor:te.anchor,wrapper:te.wrapper})};if(e.customOpenAnimation?e.customOpenAnimation.call(te.wrapper[0],r):te.wrapper.slideDown(a,r),e.watchValueChange){var s=null;te.anchor.bind("input.DRPEx",function(){clearTimeout(s),s=setTimeout(function(){s=null,D()},200)})}return e.alwaysOpen||t(document).bind("click.DRPEx",p),te.anchor.trigger("DRPEx-show",{anchor:te.anchor,wrapper:te.wrapper}),!0}return!1}function w(a){if(!e.alwaysOpen&&te.active){te.active=!1;var n=function(){te.anchor.trigger("DRPEx-closed",{anchor:te.anchor,wrapper:te.wrapper})};return e.customCloseAnimation?e.customCloseAnimation.call(te.wrapper[0],n):te.wrapper.slideUp(a,n),te.anchor.trigger("DRPEx-hide",{anchor:te.anchor,wrapper:te.wrapper}),e.container||t(window).unbind("resize.DRPEx scroll.DRPEx",m),e.watchValueChange&&te.anchor.unbind("input.DRPEx"),e.alwaysOpen||t(document).unbind("click.DRPEx",p),!0}return!1}function y(t){var n=t&&t.constructor==String?t.trim():void 0;if(n){n=t.split(e.separator);for(var r=0;r<n.length;){var s=a(n[r],e.format,te.momentObj().locale());if(!s.isValid())break;if(n[r]=s.toDate(),++r>=2)break;if(e.singleDate)break}r!=n.length&&(r>0?n.splice(r):n=void 0)}return n}function b(a){return te.momentObj(a,"x").format(e.format)}function R(e,a){Y(e[0],e.length>1?e[1]:e[0],a)}function D(){var a=y(e.getValue.call(te.anchor[0]));a&&R(a,!0),$()}function k(){var e=te.wrapper.find(".gap").css("margin-left"),a=te.wrapper.find(".month1").width(),t=te.wrapper.find(".gap").width()+(e?2*parseInt(e):0),n=te.wrapper.find(".month2").width(),r=a+t+n+2;te.wrapper.find(".month-wrapper").width(r);var s=te.wrapper.find(".top-bar input").outerWidth();te.wrapper.find(".top-bar div").width(r-s-2)}function O(e){return!(!te.selRange.start&&!te.selRange.end)&&(te.selRange.start=!1,te.selRange.end=!1,te.wrapper.find(".day.checked").removeClass("checked"),te.wrapper.find(".day.range-end").removeClass("range-end"),te.wrapper.find(".day.range-start").removeClass("range-start"),T(),N(e),I(),!0)}function x(){te.wrapper.find(".day.hovering").removeClass("hovering"),te.wrapper.find(".range-tip").hide()}function C(a){if(!te.selWeek){var n=a.hasClass("has-tooltip")&&a.attr("data-tooltip")?Z("span",{style:"white-space:nowrap"},a.attr("data-tooltip")):"";if(a.hasClass("valid")&&!a.hasClass("unselectable")&&te.selRange.start&&!te.selRange.end){var r=parseInt(a.attr("SOD-time"));te.wrapper.find(".day").each(function(){var e=parseInt(t(this).attr("SOD-time"));e==r?t(this).addClass("hovering"):t(this).removeClass("hovering"),te.selRange.start<e&&r>=e||te.selRange.start>e&&r<=e?t(this).addClass("hovering"):t(this).removeClass("hovering")});var s=X(r,te.selRange.start);e.hoveringTooltip&&("function"==typeof e.hoveringTooltip?n=e.hoveringTooltip(s,te.selRange.start,r):e.hoveringTooltip===!0&&s>1&&(n=s+" "+o("days")))}if(n){var i=a.offset(),l=te.wrapper.offset(),d=i.left-l.left,p=i.top-l.top;d+=a.width()/2;var c=te.wrapper.find(".range-tip"),f=c.css({visibility:"hidden",display:"none"}).html(n).width(),h=c.height();d-=f/2,p-=h,c.css({left:d,top:p,display:"block",visibility:"visible"})}else te.wrapper.find(".range-tip").hide()}}function W(t){if(!te.selWeek&&t.hasClass("valid")&&!t.hasClass("unselectable")){var n=parseInt(t.attr("SOD-time"));t.addClass("checked"),e.singleDate?(te.selRange.start=n,te.selRange.end=n):("week"===e.batchMode?(te.selRange.start=a(n).day(e.startOfWeek?1:0).valueOf(),te.selRange.end=a(n).day(e.startOfWeek?7:6).valueOf()):"weekdays"===e.batchMode?(te.selRange.start=a(n).day(1).valueOf(),te.selRange.end=a(n).day(5).valueOf()):"weekends"===e.batchMode?(te.selRange.start=a(n).day(6).valueOf(),te.selRange.end=a(n).day(7).valueOf()):"month"===e.batchMode?(te.selRange.start=a(n).startOf("month").valueOf(),te.selRange.end=a(n).endOf("month").startOf("day").valueOf()):te.selRange.start&&te.selRange.end||!te.selRange.start&&!te.selRange.end?(te.selRange.start=n,te.selRange.end=!1):te.selRange.start&&(te.selRange.end=n),l(te.selRange),x(),te.selRange.end||(C(t),te.wrapper.find(".week-number").removeClass("week-ranged"))),T(),N(),L(),B()}}function S(e,a){te.wrapper.find(".day").each(function(){var n=parseInt(t(this).attr("SOD-time"));e==n?(t(this).addClass("range-start"),t(this).removeClass("range-end")):a==n?(t(this).removeClass("range-start"),t(this).addClass("range-end")):(t(this).removeClass("range-start"),t(this).removeClass("range-end")),e<=n&&a>=n?t(this).addClass("hovering"):t(this).removeClass("hovering")})}function M(t){if(!e.singleDate&&(!te.selRange.start||te.selRange.end||te.selWeek)&&t.hasClass("valid")&&!t.hasClass("unselectable")){var n=parseInt(t.attr("SOW-time"));if(te.selWeek){x();var r=new Date(n<te.selWeek?n:te.selWeek),s=new Date(n<te.selWeek?te.selWeek:n);te.selWeek=!1,te.selRange.start=a(r).day(e.startOfWeek?1:0).valueOf(),te.selRange.end=a(s).day(e.startOfWeek?7:6).valueOf()}else{te.selWeek=n;var o=new Date(n);te.selRange.start=a(o).day(e.startOfWeek?1:0).valueOf(),te.selRange.end=!1;var i=a(o).day(e.startOfWeek?7:6).valueOf();te.wrapper.find(".day.checked").removeClass("checked"),S(te.selRange.start,i),te.wrapper.find(".week-ranged").removeClass("week-ranged"),t.addClass("week-ranged")}T(),N(),L(),B()}}function P(t){if(te.selWeek&&!e.singleDate){var n=parseInt(t.attr("SOW-time"));if(n>=te.selWeek){var r=new Date(n),s=a(r).day(e.startOfWeek?7:6).valueOf();S(te.selRange.start,s)}else{var o=new Date(n),i=new Date(te.selWeek),l=a(o).day(e.startOfWeek?1:0).valueOf(),s=a(i).day(e.startOfWeek?7:6).valueOf();S(l,s)}}}function E(t,n){if(G(t))return!1;if(!e.singleDate&&n){if(e.maxDays>0&&X(t,te.selRange.start)>e.maxDays||e.minDays>0&&X(t,te.selRange.start)<e.minDays)return!1;if(e.selectForward&&t<te.selRange.start||e.selectBackward&&t>te.selRange.start)return!1}if(e.beforeShowDay){for(var r=a(t);Q(r,te.selRange.start);){var s=e.beforeShowDay(r.toDate());if(s[0]===!1)return!1;r.add(t<te.selRange.start?1:-1,"day")}return e.beforeShowDay(r.toDate())[0]!==!1}return!0}function T(){return te.wrapper.find(".unselectable").removeClass("unselectable"),te.selRange.start&&(te.selRange.end?(te.wrapper.find(".day.toMonth.valid").each(function(){var e=parseInt(t(this).attr("SOD-time"));e>=te.selRange.start&&e<=te.selRange.end&&(E(e)||t(this).addClass("unselectable"))}),te.wrapper.find(".week-number.valid").each(function(){var n=parseInt(t(this).attr("SOW-time"));n>=te.selRange.start&&(n=a(n).day(e.startOfWeek?7:6).toDate(),n<=te.selRange.end&&(E(n)||t(this).addClass("unselectable")))})):(te.wrapper.find(".day.toMonth.valid").each(function(){var e=parseInt(t(this).attr("SOD-time"));E(e,!0)||t(this).addClass("unselectable")}),te.wrapper.find(".week-number.valid").each(function(){var n=parseInt(t(this).attr("SOW-time"));n>=te.selRange.start&&(n=a(n).day(e.startOfWeek?7:6).toDate()),E(n,!0)||t(this).addClass("unselectable")}))),!0}function j(){if(I()){if(e.singleDate){var a=b(te.selRange.start);return[a,new Date(te.selRange.start)]}var t=b(te.selRange.start),n=b(te.selRange.end),a=t+e.separator+n;return[a,[new Date(te.selRange.start),t],[new Date(te.selRange.end),n]]}}function A(){var a=j();a&&(e.singleDate?te.anchor.trigger("DRPEx-apply",{text:a[0],date:a[1]}):te.anchor.trigger("DRPEx-apply",{text:a[0],start:a[1],end:[2]}),e.setValue.call(te.anchor[0],a[0],a[1],a[2])),w(e.animationTime)}function B(){I()&&e.autoClose&&A()}function I(){var t=!0,n=te.selRange.start&&te.selRange.end?X(te.selRange.start,te.selRange.end):NaN;if(e.singleDate)te.selRange.start||(t=void 0);else if(e.maxDays&&n>e.maxDays){var r=o("less-than").replace("%d",e.maxDays);te.wrapper.find(".top-bar .error-top").html(r).attr("title",r),t=!1}else if(e.minDays&&n<e.minDays){var r=o("more-than").replace("%d",e.minDays);te.wrapper.find(".top-bar .error-top").html(r).attr("title",r),t=!1}else isNaN(n)&&(t=void 0);if(t)if(G(te.selRange.start)){var r=o("range-start-bound");te.wrapper.find(".top-bar .error-top").html(r).attr("title",r),t=!1}else if(G(te.selRange.end)){var r=o("range-end-bound");te.wrapper.find(".top-bar .error-top").html(r).attr("title",r),t=!1}if(t&&e.batchMode){var s=a(te.selRange.start),i=a(te.selRange.end);switch(e.batchMode){case"week":s.isSame(s.clone().day(e.startOfWeek?1:0))&&i.isSame(s.clone().day(e.startOfWeek?7:6))||(t=!1);break;case"weekdays":s.isSame(s.clone().day(1))&&i.isSame(s.clone().day(5))||(t=!1);break;case"weekends":s.isSame(s.clone().day(6))&&i.isSame(s.clone().day(0))||(t=!1);break;case"month":s.isSame(s.clone().startOf("month"))&&i.isSame(s.clone().endOf("month").startOf("day"))||(t=!1);break;default:throw new Error("Unrecognized batch mode - "+e.batchMode)}if(!t){var r=o("batch-invalid").replace("%s",o("batch-"+e.batchMode));te.wrapper.find(".top-bar .error-top").html(r).attr("title",r)}}if(t&&(t=E(te.selRange.end),!t)){var r=o("disabled-range");te.wrapper.find(".top-bar .error-top").html(r).attr("title",r)}return t?(te.wrapper.find(".top-bar").removeClass("error").addClass("normal"),te.wrapper.find(".apply-btn").removeClass("disabled").val(o("apply-enabled"))):(void 0==t?(te.wrapper.find(".top-bar").removeClass("error"),te.selRange.start?te.wrapper.find(".top-bar").addClass("normal"):te.wrapper.find(".top-bar").removeClass("normal")):te.wrapper.find(".top-bar").addClass("error").removeClass("normal"),te.wrapper.find(".apply-btn").addClass("disabled").val(o("apply-disabled"))),t}function N(a){te.wrapper.find(".start-day").html("..."),te.wrapper.find(".end-day").html("..."),te.wrapper.find(".selected-days").hide(),te.selRange.start&&te.wrapper.find(".start-day").html(b(te.selRange.start)),te.selRange.end&&te.wrapper.find(".end-day").html(b(te.selRange.end));var t;if(e.singleDate)a||(t={},te.selRange.start&&(t.date=new Date(te.selRange.start)));else{var n=te.wrapper.find(".selected-days");if(te.selRange.end!==!1){var r=X(te.selRange.end,te.selRange.start);n.show(),n.find(".selected-days-num").html(r),n.find(".days-label").html(o(1===r?"day":"days"))}else n.hide();a||(t={},te.selRange.start&&(t.start=new Date(te.selRange.start)),te.selRange.end&&(t.end=new Date(te.selRange.end)))}var s=te.wrapper.find(".top-bar .normal-top");s.attr("title",s.text()),t&&te.anchor.trigger("DRPEx-change",t)}function Y(e,a,t){var n={start:e,end:a};l(n),te.selRange.start==n.start.getTime()&&te.selRange.end==n.end.getTime()||(te.selRange.start=n.start.getTime(),te.selRange.end=n.end.getTime(),N(t),t?I():B())}function L(){(te.selRange.start||te.selRange.end)&&(te.wrapper.find(".day").each(function(){var e=parseInt(t(this).attr("SOD-time"));te.selRange.end&&te.selRange.end>=e&&te.selRange.start<=e||!te.selRange.end&&te.selRange.start==e?t(this).addClass("checked"):t(this).removeClass("checked"),te.selRange.start==e?t(this).addClass("range-start"):t(this).removeClass("range-start"),te.selRange.end==e?t(this).addClass("range-end"):t(this).removeClass("range-end")}),te.wrapper.find(".week-number").each(function(){parseInt(t(this).attr("SOW-time"))==te.selWeek&&t(this).addClass("week-ranged")}),te.selRange.end&&te.wrapper.find(".week-number").each(function(){var n=new Date(parseInt(t(this).attr("SOW-time"))),r=a(n).day(e.startOfWeek?1:0).valueOf(),s=a(n).day(e.startOfWeek?7:6).valueOf();r>=te.selRange.start&&s<=te.selRange.end?t(this).addClass("week-ranged"):t(this).removeClass("week-ranged")}))}function z(e){return te.momentObj(e).format(te.monthFormat)}function F(e,t){te[t]&&0===U(te[t],e)||(e=a(e).startOf("month").toDate(),te.wrapper.find("."+t+" .month-name").html(z(e)),te.wrapper.find("."+t+" tbody").html(ee(e)),te[t]=e),T(),L()}function V(){U(te.month2,te.month1)>1?te.wrapper.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):te.wrapper.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var e=te.wrapper.find("table.month1").height(),a=te.wrapper.find("table.month2").height();te.wrapper.find(".gap").height(Math.max(e,a)+10)}function q(){var e=te.month1;te.month1=void 0,F(e,"month1");var a=te.month2;te.month2=void 0,F(a,"month2"),k(),V()}function H(){var t=e.defaultTime?e.defaultTime:new Date;return e.dateRange.start&&U(t,e.dateRange.start)<0?t=a(e.dateRange.start).toDate():e.dateRange.end&&U(t,e.dateRange.end)>0&&(t=K(a(e.dateRange.end).toDate())),t}function $(){var a=te.selRange.start||H(),t=te.selRange.end||a;e.singleMonth?e.lookBehind&&(a=t):0===U(a,t)?e.lookBehind?a=K(a):t=J(t):e.stickyMonths&&(e.lookBehind?a=K(t):t=J(a)),F(a,"month1"),F(t,"month2"),V()}function U(e,t){return a(e).startOf("month").diff(a(t).startOf("month"),"month")}function Q(e,t){return a(e,"x").diff(a(t,"x"),"day")}function X(e,a){return Math.abs(Q(e,a))+1}function G(t){return t=a(t),e.dateRange.start&&t.isBefore(e.dateRange.start)||e.dateRange.end&&t.isAfter(e.dateRange.end)}function J(e){return a(e).add(1,"month").toDate()}function K(e){return a(e).add(-1,"month").toDate()}function Z(e,a,n){var r="<"+e;return a&&(t.each(a,function(e,a){a.constructor==Array&&(a=a.reduce(function(e,a){return(e||"")+(a?" "+a:"")})),r+=" "+e+'="'+a+'"'}),void 0!==n&&(r+=n?">"+n+"</"+e:"/")),r+">"}function _(a){var n=Z("div",{"class":["dr-picker",e.haveTopbar?e.customTopBar?"custom-topbar":"":"no-topbar",e.inline?"inline":""],id:"date-picker-"+a});e.haveTopbar&&(n+=Z("div",{"class":"top-bar"}),e.customTopBar?n+=Z("div",{"class":"custom-top"},"function"==typeof e.customTopBar?e.customTopBar():e.customTopBar):(n+=Z("div",{"class":"normal-top"})+Z("span",{},o("selected"))+" "+Z("b",{"class":"start-day"},"[start day]"),e.singleDate||(n+=Z("span",{"class":"separator-day"},e.separator)+Z("b",{"class":"end-day"},"[end day]")+Z("i",{"class":"selected-days"})+" ("+Z("span",{"class":"selected-days-num"},"X")+" "+Z("span",{"class":"days-label"},o("days"))+")"+Z("/i")),n+=Z("/div"),n+=Z("div",{"class":"error-top"},"Error message")+Z("div",{"class":"default-top"},"Default message")),n+=Z("input",{type:"button",value:o("apply-disabled"),"class":["apply-btn","disabled",e.autoClose?"hide":"",e.applyBtnClass?e.applyBtnClass:""]},""),n+=Z("/div")),n+=Z("div",{"class":"month-wrapper"});var r=function(){var a="";return e.showWeekNumbers&&(a+=Z("th",{},o("week-number"))),a+=e.startOfWeek?Z("th",{},o("week-1"))+Z("th",{},o("week-2"))+Z("th",{},o("week-3"))+Z("th",{},o("week-4"))+Z("th",{},o("week-5"))+Z("th",{},o("week-6"))+Z("th",{},o("week-7")):Z("th",{},o("week-7"))+Z("th",{},o("week-1"))+Z("th",{},o("week-2"))+Z("th",{},o("week-3"))+Z("th",{},o("week-4"))+Z("th",{},o("week-5"))+Z("th",{},o("week-6"))},s=function(a){var t=Z("table",{"class":a,cellspacing:0,border:0,cellpadding:0});return t+=Z("thead")+Z("tr",{"class":"caption"})+Z("th",{"class":"button"},Z("span",{"class":"prev"},e.customArrowPrevSymbol||"&lt;"))+Z("th",{"class":"month-name",colspan:e.showWeekNumbers?6:5},"[month]")+Z("th",{"class":"button"},Z("span",{"class":"next"},e.customArrowNextSymbol||"&gt;"))+Z("/tr")+Z("tr",{"class":"week-name"},r())+Z("/thead"),t+Z("tbody",{},"")+Z("/table")};if(n+=s("month1"),!e.singleMonth){var i=function(){for(var e=Z("div",{"class":"gap"})+Z("div",{"class":"gap-top-mask"},"")+Z("div",{"class":"gap-bottom-mask"},"")+Z("div",{"class":"gap-lines"}),a=0;a<20;a++)e+=Z("div",{"class":"gap-line"},Z("div",{"class":"gap-1"},"")+Z("div",{"class":"gap-2"},"")+Z("div",{"class":"gap-3"},""));return e+Z("/div")+Z("/div")};n+=i()+s("month2")}n+=Z("div",{"class":"spacer"},"")+Z("/div"),n+=Z("div",{"class":"footer"});var l=function(){var a="",n=e.shortcuts;if(n["prev-days"]&&n["prev-days"].length>0){a+=Z("span",{"class":"prev-days"})+o("past");for(var r=0;r<n["prev-days"].length;r++){var s=n["prev-days"][r];a+=Z("span",{"class":"shortcut",shortcut:"day,-"+s},s+" "+o(s>1?"days":"day"))}a+=Z("/span")}if(n["next-days"]&&n["next-days"].length>0){a+=Z("span",{"class":"next-days"})+o("following");for(var r=0;r<n["next-days"].length;r++){var s=n["next-days"][r];a+=Z("span",{"class":"shortcut",shortcut:"day,+"+s},s+" "+o(s>1?"days":"day"))}a+=Z("/span")}if(n.prev&&n.prev.length>0){a+=Z("span",{"class":"prev-buttons"})+o("previous");for(var r=0;r<n.prev.length;r++){var i=n.prev[r];a+=Z("span",{"class":"shortcut",shortcut:"prev,"+i},o("prev-"+i))}a+=Z("/span")}if(n.next&&n.next.length>0){a+=Z("span",{"class":"next-buttons"})+o("next");for(var r=0;r<n.next.length;r++){var i=n.next[r];a+=Z("span",{"class":"shortcut",shortcut:"next,"+i},o("next-"+i))}a+=Z("/span")}if(n.custom&&!t.isEmptyObject(n.custom)){a+=Z("span",{"class":"custom-buttons"});for(var l in n.custom)a+=Z("span",{"class":"shortcut",shortcut:"custom"},l);a+=Z("/span")}return a},d=l();return n+=Z("div",{"class":["shortcuts",d?"":" none"]},Z("b",{},o("shortcuts"))+d),n+=Z("/div"),n+=Z("div",{"class":"range-tip"},""),n+=Z("/div"),t(n)}function ee(t){var n=[];t.setDate(1);var r=t.getDay();if(0===r&&e.startOfWeek&&(r=7),r>0)for(var s=r;s>0;s--){var o=a(t).subtract(s,"day").toDate();n.push({date:o,type:"lastMonth",day:o.getDate(),time:o.getTime(),valid:!G(o.getTime())})}for(var i=t.getMonth(),s=0;s<40;s++){var l=a(t).add(s,"day").toDate();n.push({date:l,type:l.getMonth()==i?"toMonth":"nextMonth",day:l.getDate(),time:l.getTime(),valid:!G(l.getTime())})}var d="",p=a(),c=p.diff(t,"month",!0);(c<0||c>1)&&(p=!1);for(var f=0;f<6&&"nextMonth"!=n[7*f].type;f++){d+=Z("tr");for(var h,u="",g=!0,o=0;o<7;o++){var m=7*f+(e.startOfWeek?o+1:o),l=n[m];if(0===o&&(h=l),l.extraClass="",l.tooltip="",l.valid&&e.beforeShowDay){var v=e.beforeShowDay(l.date);l.valid=v[0],l.extraClass=v[1]||"",l.tooltip=v[2]||"",""!==l.tooltip&&(l.extraClass+=" has-tooltip ")}g=g&&l.valid,e.startOfWeek?o>=5&&(l.extraClass+=" weekend "):0!=o&&6!=o||(l.extraClass+=" weekend "),u+=Z("td",{},Z("div",{"SOD-time":l.time,"data-tooltip":l.tooltip,"class":["day",l.type,l.extraClass,l.valid?"valid":l.valid===!1?"invalid":"skipped",p&&p.date()==l.day?"real-today":""]},ae(l.time,l.day)))}e.showWeekNumbers&&(d+=Z("td",{},Z("div",{"class":["week-number",g?"valid":"invalid"],"SOW-time":h.time},e.getWeekNumber(h.date)))),d+=u+Z("/tr")}return d}function ae(a,t){return e.showDateFilter&&"function"==typeof e.showDateFilter?e.showDateFilter(a,t):t}e=t.extend({inline:!1,autoStart:!1,autoClose:!1,alwaysOpen:!1,dropTrigger:!0,watchValueChange:!0,format:"YYYY-MM-DD",separator:" to ",language:void 0,startOfWeek:void 0,getValue:function(){return t(this).val()},setValue:function(e){e!=t(this).val()&&t(this).val(e).change()},dateRange:{start:!1,end:!1},minDays:0,maxDays:0,shortcuts:{},container:void 0,singleDate:!1,lookBehind:!1,batchMode:!1,animationTime:200,stickyMonths:!1,selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:!1,hoveringTooltip:function(e,a,t){return e>1?e+" "+o("days"):""},beforeShowDay:void 0,haveTopbar:!0,showWeekNumbers:!1,getWeekNumber:function(e){return a(e).format("w")},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null},e),e.singleMonth&&(e.stickyMonths=!1),e.haveTopbar||(e.autoClose=!0),e.singleDate&&(e.batchMode=!1),e.dateRange.start&&e.dateRange.start.constructor==String&&(e.dateRange.start=a(e.dateRange.start,e.format).toDate()),e.dateRange.end&&e.dateRange.end.constructor==String&&(e.dateRange.end=a(e.dateRange.end,e.format).toDate()),e.alwaysOpen&&(e.autoStart=!0,e.dropTrigger=!1),l(e.dateRange);var te={anchor:t(this),wrapper:void 0,locale:"default",localizer:{},fblocalizer:{},momentObj:a,monthFormat:"??",selRange:{start:!1,end:!1},selWeek:!1,active:!1};return te.anchor.data("DRPEx",{open:function(e){return r(),v(e)},close:function(e){return r(),w(e)},setStart:function(t,n){return r(!0),t.constructor==String&&(t=a(t,e.format).toDate()),Y(t,te.selRange.end?a(te.selRange.end).toDate():t,n),$(),this},setEnd:function(t,n){return r(!0),t.constructor==String&&(t=a(t,e.format).toDate()),Y(te.selRange.start?a(te.selRange.start).toDate():t,t,n),$(),this},setRange:function(t,n,s){return r(!0),t.constructor==String&&(t=a(t,e.format).toDate()),n.constructor==String&&(n=a(n,e.format).toDate()),Y(t,n,s),$(),this},setDates:function(e,a){r(!0);var t=y(e);return t&&R(t,a),t},getDateRange:function(){return j()},clear:function(e){return r(),O(e)},wrapper:function(){return r(!0),te.wrapper},anchor:function(){return r(),te.anchor},redraw:function(){r(),te.wrapper&&q()},resetView:function(){r(),te.wrapper&&$()},isActive:function(){return r(),te.active},destroy:function(){r(),te.anchor.trigger("DRPEx-destroy",{}),te.anchor.unbind(".DRPEx"),te.anchor.data("DRPEx",void 0),te.wrapper&&te.wrapper.remove(),te.wrapper=null,t(window).unbind("resize.DRPEx scroll.DRPEx",m),t(document).unbind("click.DRPEx",p)}}),e.dropTrigger&&te.anchor.bind("click.DRPEx",function(a){v(e.animationTime)}),e.autoStart&&setTimeout(v.bind(this,e.alwaysOpen?0:e.animationTime),0),this}});